<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Login</title>
</head>
<body>
	<h2>Login</h2>
	<form method="POST" action="/login" id="loginForm">
		<label>Username: <input name="username" /></label><br/>
		<label>Password: <input name="password" type="password" /></label><br/>
		<button type="submit">Login</button>
	</form>
	<script>
	document.getElementById('loginForm').onsubmit = async function(e) {
		e.preventDefault();
		let res = await fetch('/login', {
			method: 'POST',
			headers: {'Content-Type': 'application/json'},
			body: JSON.stringify({
				username: e.target.username.value,
				password: e.target.password.value
			})
		});
		if(res.ok){
            let data = await res.json();
            localStorage.setItem('token', data.token);
            console.log("Login thành công, token:", data.token);
            window.location.href = '/';
        }else{
            alert('Login thất bại');
        }
	};
	</script>
</body>
</html>
